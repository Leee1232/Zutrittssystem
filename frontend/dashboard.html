<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
</head>

<body>
    <!-- Beispiel Dashboard (Vue.js) -->
    <template>
        <div>
            <h1>Willkommen im Dashboard!</h1>
            <p>Hier sind deine Daten:</p>
            <div v-if="students.length > 0">
                <ul>
                    <li v-for="student in students" :key="schueler.schueler_id">
                        {{ schueler.vorname }} {{ schueler.nachname }} ({{ schueler.klasse }})
                    </li>
                </ul>
            </div>
            <div v-else>
                <p>Keine Daten gefunden</p>
            </div>
        </div>
    </template>

    <script>
        export default {
            data() {
                return {
                    schueler: [],
                };
            },
            created() {
                this.fetchStudents();
            },
            methods: {
                async fetchStudents() {
                    try {
                        const token = localStorage.getItem('access_token');
                        const response = await fetch('https://zutrittssystem.onrender.com/schueler', {
                            method: 'GET',
                            headers: {
                                'Authorization': `Bearer ${token}`,
                            },
                        });
                        const data = await response.json();
                        this.students = data;
                    } catch (error) {
                        console.error('Error fetching students:', error);
                    }
                },
            },
        };
    </script>

</body>

</html>