<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schülerliste</title>
</head>

<body>
    <h1>Schülerliste</h1>
    <p>Zweig: <span id="branch-name"></span></p>
    <p>Klasse: <span id="class-name"></span></p>

    <label for="student-search">Schüler suchen:</label>
    <input type="text" id="student-search" placeholder="Schülername eingeben" />
    <ul id="students-list">
        <li>Schüler werden geladen...</li>
    </ul>

    <script>
        // API-Endpunkt für Schüler
        const apiBase = "http://localhost:3000/api"; // Dummy-API

        const urlParams = new URLSearchParams(window.location.search);
        const branchId = urlParams.get("branch");
        const classId = urlParams.get("class");

        const branchNameElement = document.getElementById("branch-name");
        const classNameElement = document.getElementById("class-name");
        const studentSearchInput = document.getElementById("student-search");
        const studentsList = document.getElementById("students-list");

        // Lade Schülerliste
        fetch(`${apiBase}/branches/${branchId}/classes/${classId}/students`)
            .then(response => response.json())
            .then(data => {
                branchNameElement.textContent = data.branchName;
                classNameElement.textContent = data.className;

                studentsList.innerHTML = "";
                data.students.forEach(student => {
                    const li = document.createElement("li");
                    li.textContent = student.name;
                    studentsList.appendChild(li);
                });

                // Suche nach Schülern
                studentSearchInput.addEventListener("input", () => {
                    const searchValue = studentSearchInput.value.toLowerCase();
                    const items = studentsList.querySelectorAll("li");
                    items.forEach(item => {
                        if (item.textContent.toLowerCase().includes(searchValue)) {
                            item.style.display = "list-item";
                        } else {
                            item.style.display = "none";
                        }
                    });
                });
            });
    </script>
</body>

</html>